{% extends "authed-base.html" %}

{% block content %}
    <h2 class="text-5xl font-bold">Games</h2>

    <div class="divider"></div>

    <div class="grid gap-4 md:grid-cols-1 {% if !games_hosted.is_empty() && !games_joined.is_empty() %} lg:grid-cols-2 {% endif %}">
        {% if !games_hosted.is_empty() %}
            <div class="flex flex-col gap-2">
                <h3 class="text-xl font-bold pl-2">Hosted</h3>
                <table class="table border-2 border-base-100">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Name</th>
                            <th>Code</th>
                            <th>Players</th>
                            <th>Winners</th>
                            <th>Winning Points</th>
                        </tr>
                    </thead>

                    {% for game in games_hosted %}
                        <tbody>
                            <tr>
                                <td>
                                    <div class="flex flex-row justify-center">
                                        {% if game.status == "ACTIVE" %}
                                            <span class="flex w-2 h-2 me-2 bg-accent rounded-full"></span>
                                        {% else %}
                                            <span class="flex w-2 h-2 me-2 bg-base-100 rounded-full dark:bg-gray-700"></span>
                                        {% endif %}
                                    </div>
                                </td>
                                <td>{{ game.name }}</td>
                                <td>{{ game.game_code }}</td>
                                <td>{{ game.players_count.unwrap_or(0) }}</td>
                                <td>{{ game.winners_count.unwrap_or(0) }}</td>
                                <td>{{ game.winning_points.unwrap_or(0) }}</td>
                            </tr>
                        </tbody>
                    {% endfor %}

                    <tfoot>
                        <tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        {% endif %}

        {% if !games_joined.is_empty() %}
            <div class="flex flex-col gap-2">
                <h3 class="text-xl font-bold pl-2">Joined</h3>
                <table class="table border-2 border-base-100">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Did you win?</th>
                            <th>Name</th>
                            <th>Code</th>
                            <th>Players</th>
                            <th>Winners</th>
                            <th>Winning Points</th>
                        </tr>
                    </thead>

                    {% for game in games_joined %}
                        <tbody>
                            <tr>
                                <td>
                                    <div class="flex flex-row justify-center">
                                        {% if game.status == "ACTIVE" %}
                                            <span class="flex w-2 h-2 me-2 bg-accent rounded-full"></span>
                                        {% else %}
                                            <span class="flex w-2 h-2 me-2 bg-base-100 rounded-full dark:bg-gray-700"></span>
                                        {% endif %}
                                    </div>
                                </td>
                                <td>{{ game.is_winner.unwrap_or(false) }}</td>
                                <td>{{ game.name }}</td>
                                <td>{{ game.game_code }}</td>
                                <td>{{ game.players_count.unwrap_or(0) }}</td>
                                <td>{{ game.winners_count.unwrap_or(0) }}</td>
                                <td>{{ game.winning_points.unwrap_or(0) }}</td>
                            </tr>
                        </tbody>
                    {% endfor %}

                    <tfoot>
                        <tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        {% endif %}
    </div>
{% endblock %}

